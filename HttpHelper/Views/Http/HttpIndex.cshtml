<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

</head>
<body>



    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
        <legend>请求表单</legend>
    </fieldset>

    <form class="layui-form" action="" lay-filter="example">
        <div style="height:650px;overflow-x:auto">
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">请求路径</label>
                    <div class="layui-input-block">
                        <input name="Url" class="layui-input" type="text" placeholder="路径" autocomplete="off">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">请求类型</label>
                    <div class="layui-input-block">
                        <select name="RequestMethod" lay-filter="aihao">
                            <option value="1" selected="">Get</option>
                            <option value="2">Post</option>

                        </select>
                    </div>

                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">并发次数</label>
                    <div class="layui-input-block">
                        <input name="ConcurrencyTimes" class="layui-input" type="number" placeholder="并发次数" autocomplete="off">
                    </div>
                </div>
            </div>




            <div class="layui-form-item">
                <label class="layui-form-label">PostData</label>
                <div class="layui-input-block">
                    <textarea name="PostData" class="layui-textarea" placeholder="请输入内容"></textarea>
                </div>
            </div>

            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>Request Headers</legend>
            </fieldset>



            <div class="layui-form-item layui-form-text">
                <label class="layui-form-label">Authorization</label>
                <div class="layui-input-block">
                    <textarea name="Authorization" class="layui-textarea" placeholder="请输入内容"></textarea>
                </div>
            </div>
            <div class="layui-form-item">

                <div class="layui-inline">
                    <label class="layui-form-label">Accept</label>
                    <div class="layui-input-block">
                        <input name="Accept" class="layui-input" type="text" placeholder="路径" autocomplete="off">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">Content-Type</label>
                    <div class="layui-input-block">
                        @*<input name="ContentType" class="layui-input" placeholder="请输入内容">*@
                        <select name="ContentType" lay-filter="aihao">
                            <option value="application/json" selected="">application/json</option>

                        </select>
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">Origin</label>
                    <div class="layui-input-block">
                        <input name="Origin" class="layui-input" placeholder="请输入内容">
                    </div>
                </div>
            </div>
            <div class="layui-form-item">

                <div class="layui-inline">
                    <label class="layui-form-label">Referer</label>
                    <div class="layui-input-block">
                        <input name="Referer" class="layui-input" placeholder="请输入内容">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">User-Agent</label>
                    <div class="layui-input-block">
                        <input name="UserAgent" class="layui-input" type="text" placeholder="路径" autocomplete="off">
                    </div>
                </div>
            </div>


            <div class="layui-form-item layui-form-text">
                <label class="layui-form-label">自定义Headers(JsonKeyValue)</label>
                <div class="layui-input-block">
                    <textarea name="CustomHeaders" class="layui-textarea" placeholder="请输入内容"></textarea>
                </div>
            </div>


        </div>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn layui-btn-normal" id="LAY-component-form-setval" type="button">赋值</button>
                <button class="layui-btn layui-btn-normal" id="LAY-component-form-getval" type="button">取值</button>
                <button class="layui-btn" type="submit" lay-filter="demo1" lay-submit="">立即提交</button>
                <button class="layui-btn layui-btn-primary" type="reset">重置</button>
            </div>
        </div>
    </form>


    @section Scripts{
        <script>
            layui.use(['form', 'layedit', 'laydate'], function () {
                var form = layui.form
                    , layer = layui.layer
                    , layedit = layui.layedit
                    , laydate = layui.laydate;



                //默认赋值
                form.val('example', {
                    "Url": "http://localhost:63505/api/DeveloperWithdraw/ApplyCash", // "name": "value"
                    "RequestMethod": 2,
                    "ConcurrencyTimes": 1,
                    "PostData": '{"DeveloperID":18,"WithdrawCash":"500","PayAmount":"500"}',
                    'Accept': 'application/json, text/plain, */*',
                    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwSVUyZk54MlllUlg4dGVUIjoiMTgiLCJvOVM5YVZ0S1RZbUhVa1lkIjoiMSIsIm85UzlhVnRXVFltSFVrWWQiOiIwLjAuMC4xIiwicElVMmZOeDJZZVJYOHRlWSI6IjEiLCJ0OVM5elZ0V1RZbUhVa1lkIjoie1wiSURcIjoxOCxcIkxvZ2luTmFtZVwiOlwi5oiQ6YO95Y-L5beo56eR5oqA5pyJ6ZmQ5YWs5Y-4XCIsXCJBdXRkaXRTdHV0YXNcIjoxLFwiRGV2ZWxvcGVyVHlwZVwiOjEsXCJUaXBMaXN0XCI6bnVsbCxcIlRva2VuXCI6bnVsbCxcIkV4cGlyZXNcIjowLFwiQXV0ZGl0QmFua0luZm9TdHV0YXNcIjoxfSIsIktJVTJmTng5WWVSWDh0ZVkiOiIxIiwiYWdhZzQxd2FnMTY0MTg1dzFnIjoiZDlkNzhhMjg0ZTBlOTE5ZTYyYTFiNDMyOGY4YjdiMmQiLCJleHAiOjE1NzEyOTAwMjcsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTE1MDcvIiwiYXVkIjoiaHR0cDovL2xvY2FsaG9zdDo1MTUwNy8ifQ.VpeRpYtGv0VV8VRMPQxXGOJI3evHwx1HCOxOYdvWWPs',
                    'ContentType': 'application/json',
                    'Origin': 'http://localhost:9528',
                    'Referer': 'http://localhost:9528/',
                    'UserAgent:': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36',
                    'CustomHeaders': "[{Key;'',Value:''},{Key;'',Value:''},{Key;'',Value:''},{Key;'',Value:''},{Key;'',Value:''},{Key;'',Value:''},{Key;'',Value:''},{Key;'',Value:''},{Key;'',Value:''},{Key;'',Value:''}]"
                });



                //自定义验证规则
                form.verify({
                    Url: function (value) {
                        if (value.length < 5) {
                            return '标题至少得5个字符啊';
                        }
                    }
                });



                //监听提交
                form.on('submit(demo1)', function (data) {
                    let tishi = layer.open({
                        type: 1,
                        content: '开始请求' //这里content是一个普通的String
                    });
                    var close = () => {
                           //最后数据加载完 让 loading层消失
                            layer.close(tishi);
                    }

                    myAjax({
                        type: 'get',
                        data: data.field,
                        url: '/http/HttpRequest',
                        success: function (sd) {
                            layer.open({
                                type: 1,
                                content: sd //这里content是一个普通的String
                            });
                            close()
                        },
                        error: function () {
                            close()
                        }
                    })
                    return false;
                });


                //表单取值
                layui.$('#LAY-component-form-getval').on('click', function () {
                    var data = form.val('example');
                    alert(JSON.stringify(data));
                });

            });
        </script>
    }
</body>
</html>